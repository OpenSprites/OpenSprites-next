/**
 * css/main.styl
 * -------------
 * 
 * The main website style.
 */

os = #659593
os-gray = #828282
/* allow the secondary spelling ;) */
os-grey = os-gray
os-dark = #3C6160
os-light = #C8DDDB
os-select = #64FFFF

rupture.mobile-cutoff = 425px
rupture.tablet-cutoff = 768px
rupture.desktop-cutoff = 1024px
rupture.hd-cutoff = 1440px

@require 'font.styl'
@require 'shadow.styl'

body {
  color os-grey
  background white
  
  margin 0
  padding 0
  
  border-bottom 8px solid #eee
}

input:-webkit-autofill {
  -webkit-box-shadow 0 0 0px 1000px white inset
}

c() {
  width calc(100% - 48px * 2)
  max-width 1280px
  
  +mobile() {
    width calc(100% - 24px * 2)
  }
  
  +tablet() {
    width calc(100% - 36px * 2)
  }
   
  margin 0 auto
  
  &.slim {
    max-width 900px
  }
  
  &.thin {
    max-width 640px
  }
}

.c, .container {
  c()
}

main {
  c()
  col(1 / 3)
  
  margin 2em auto
  position relative

  color os-grey
  background rgba(255, 255, 255, 0.6)
  
  padding 48px
  
  +mobile() {
    padding 24px
  }
  
  +tablet() {
    padding 32px
  }
  
  > :first-child {
    margin-top 0
  }
  
  > :last-child {
    margin-bottom 0
  }
}

main + main {
  margin-top -2.5em
}

code, pre {
  word-break break-word
}

.split {
  display block

  > * {
    flex-grow 1
    flex-shrink 0
    
    width 100%
  }
  
  +desktop() {
    display flex
    
    > * {
      width 50%
    }
  }
}

.btn {
  display inline-block

  border-radius 3px
  padding .55em 1em
  
  color white
  background os
  border 2px solid os
  
  &:disabled {
    background lightgray
    cursor default
    border-color lightgray
  }
  
  &.white-border {
    border 2px solid white
  }
  
  outline none
  cursor pointer
  user-select none
  transition 150ms;

  &.flat {
    color os
    background white
    
    border 2px solid os
    
    &:disabled {
      background lightgray
      cursor default
      border-color lightgray
      color white
    }
    
    &:hover:not(:disabled) {
      color white
      background os
    }
  }
  
  &.super {
    color os
    background white
    border 2px solid white
  }
  
  @extend .body
  font-weight 600
  text-transform lowercase
}

.icon {
  font-family 'Material Icons' !important
  font-weight normal
  font-style normal
  letter-spacing normal
  direction ltr
  word-wrap normal
  text-transform none
}

.center {
  text-align center
}

header {
  background os
  
  >:first-child {
    margin-top 0
    background os
    
    color os-light
    
    h1, h2, h3 {
      color white
    }
    
    a {
      color white
    }
  }
}

.avatar {
  border-radius 3px
}

hr {
  display block
  width 25%
  
  margin .4em auto

  border none
  border-top 1px solid rgba(os-grey, 0.2)
}

.template {
  display none !important
}

input[type=text] {
  border 0
  
  &::placeholder {
    color os-light
  }
}

[contenteditable=true]:empty:before {
  content attr(placeholder)
  color os-light
}

header + hr {
  display none
}

.dialog {
  background rgba(0, 0, 0, 0.5)
  position fixed
  z-index 999999
  top 0
  left 0
  width 100%
  height 100%
  display none
  opacity 0
  transition opacity 0.2s
  
  &.active {
    opacity 1
    display block
  }

  .dialog-content {
    position absolute
    top 50%
    left 50%
    transform: translateX(-50%) translateY(-50%)
    background white
    border-radius 1em
    min-width 30%
    min-height 30%
    max-width 90%
    max-height 90%
    padding 1em 1em
    display flex
    flex-direction column
    box-sizing border-box
    
    .dialog-content-inner {
      flex 1
      overflow-y auto
      
      h2 {
        margin 0
        padding 0
      }
    }
    
    .button-pane {
      border-top 1px solid gray
      width 100%
      display flex
      flex-direction row
      align-items flex-end
      justify-content flex-end
      height: 5em
      
      .btn {
        display inline-block
        margin 0.5em
      }
    }
  }
}

#cookie-policy {
  @extend .body
  
  border 3px solid os
  background white
  
  position fixed
  right 1em
  bottom 1em
    
  max-width 600px
  padding 1em
  
  border-radius 3px
  
  shadow 2
  
  .btn {
    margin-top 1em
  }
  
  +below(720px) {
    right 0
    bottom 0
    
    border 0
    border-top 3px solid os

    max-width initial
  }
}

.dropdowncheck {
  display inline-block
  position relative
  user-select none
  
  .dropdowncheck-box {
    border 2px solid os
    border-radius 3px
    cursor default
    display flex
    transition background 0.1s, color 0.1s
    overflow hidden
    
    &:hover {
      background os
      color white
    }
    
    span {
      padding .55em 1em;
    }
    
    i {
      border-left 1px solid os
      padding-top .4em
    }
  }
  
  &.white-border {
    .dropdowncheck-box {
      border 2px solid white
    }
  }
    
  
  .dropdowncheck-dropdown {
    display none
    position absolute
    z-index 1
    background white
    padding 0
    padding-bottom 0.5em
    border 1px solid os
    width 100%
    max-width 100%
    box-sizing border-box
    max-height 200px
    overflow-y auto
    
    input.filter {
      background white
      box-sizing border-box
      display block
      max-width 100%
      border-bottom 2px solid os
      font-size 1.2em
      padding-left 0.2em
      padding-right
      user-select initial
      color os-grey
    }
    
    .dropdowncheck-item {
      display flex
      align-items flex-start
      white-space nowrap
      max-width 100%
      margin-left 1em
      margin-right 1em
      
      .dropdowncheck-check-container {
        min-width 24px
        width 24px
      }
      
      span {
        overflow hidden
        text-overflow ellipsis
        padding-left 0.5em
        box-sizing border-box
        color os-grey
      }
    }
  }
  
  &.active {
    .dropdowncheck-box {
      border-bottom-right-radius 0
      border-bottom-left-radius 0
      background os
      color white
    }
    
    .dropdowncheck-dropdown {
      display block
    }
  }
}

.bottom-main {
  background rgba(os, 0.9)
  position fixed
  z-index 1
  right 0
  bottom 0
  width 16em
  height 2em
  
  transition all 0.3s
  
  .bottom-bar {
    position absolute
    bottom 0
    right 0
    width 100%
    display flex
    justify-content space-around
    
    button {
      @extend .body
      border-radius 3px
      padding 0
      margin 0.2em 0.5em
  
      color white
      background transparent
      outline none
      cursor pointer
      user-select none
      transition all .1s
      border 0
      
      i {
        vertical-align middle
        position relative
      }
      
      .count {
        background white
        color os
        border 1px solid os
        border-radius 1em
        font-size 0.5em
        position absolute
        top -0.4em
        right -0.4em
        padding 0.1em
        &[data-count='0'] {
          display none
        }
      }
      
      .count::after {
        content: attr(data-count)
        font-family: 'Lato',sans-serif;
      }
      
      &.selected {
        text-shadow 0px 0px 5px white
      }
    }
    
    .expanded-btns {
      display none
    }
  }
  
  .bottom-expand {
    display none
    color white
    width 100%
    height 100%
    
    >div:not(.active) {
      display none
    }
    
    >div {
      height calc(100% - 2em)
      width 100%
    }
  }
  
  &.active {
    width 100%
    height 200px
    z-index 5
    
    &.fullscreen {
      height 90%
      width 90%
      bottom 5%
      left 5%
      border 2px solid white
      
      .backpack-ui {
        .backpack-content {
          overflow-x hidden
          overflow-y auto
          white-space initial
          
          display flex
          flex-direction row
          justify-content: center;
          align-content flex-start
          flex-wrap wrap
          
          .backpack-item {
            margin-bottom 1em
          }
        }
      }
    }
    
    .bottom-bar {
      .expanded-btns {
        display inline-block
      }
    }
    
    .bottom-expand {
      display block
    }
  }
  
  .backpack-ui {
    display flex
    flex-direction column
    
    .backpack-bar {
      width 100%
      padding-top 0.3em
      
      .status {
        vertical-align top
        &:after {
          content: " "
        }
      }
      
      >button, >div {
        display inline-block
        background transparent
        border 0
        color white
        padding 0 0
        margin 0 0.5em
        cursor default
        transition all 0.1s
        border-radius 3px
        position relative
        
        .label {
          font-size 12px
          position relative
          top -.6em
          padding 0 0.5em
        }
        
        &:hover:not(:disabled) {
          background os-light
          color #444
        }
        
        &:disabled {
          color #bbb
        }
      }
      
      .divider {
        width 1px
        height 1.3em
        background white
      }
      
      .dropdown-container {
        .dropdown {
          list-style-type none
          
          position absolute
          /* yay epic CSS hacks */
          bottom 0
          transform translateY(100%)
          margin 0
          padding 0
          
          background os-light
          border-bottom-right-radius 0.5em
          border-bottom-left-radius 0.5em
          z-index 9999
          max-height 0
          overflow hidden
          box-sizing border-box
          transition max-height 0.2s
          
          li {
            display block
            cursor default
            background os-light
            color #444 !important
            transition all 0.1s
            margin 0
            padding-left 1em
            padding-right 1em
            &:hover {
              background os-dark
              color white !important
              button {
                color white
              }
            }
            
            button {
              background transparent
              border 0
              color #444
            }
          }
        }
        
        &:hover {
          button {
            border-bottom-right-radius 0
            border-bottom-left-radius 0
          }
          .dropdown {
            max-height 500px
          }
        }
      }
    }
    
    .backpack-content {
      width 100%
      flex 1
      overflow-x auto
      overflow-y hidden
      white-space nowrap
      transition background 0.3s
      box-sizing border-box
      
      &::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      &::-webkit-scrollbar-button {
        width: 0px;
        height: 0px;
      }
      &::-webkit-scrollbar-thumb {
        background: #c0c0c0;
        border: 0px none #ffffff;
        border-radius: 50px;
      }
      &::-webkit-scrollbar-thumb:hover {
        background: #ffffff;
      }
      &::-webkit-scrollbar-thumb:active {
        background: #ffffff;
      }
      &::-webkit-scrollbar-track {
        background: #666666;
        border: 0px none #ffffff;
        border-radius: 50px;
      }
      &::-webkit-scrollbar-track:hover {
        background: #666666;
      }
      &::-webkit-scrollbar-track:active {
        background: #666666;
      }
      &::-webkit-scrollbar-corner {
        background: transparent;
      }
      
      .backpack-item {
        width 100px
        height 100px
        overflow hidden
        border 2px solid os-grey
        border-radius 3px
        box-sizing content-box
        position relative
        display inline-block
        margin 0 0.5em
        background-repeat repeat
        background-image url("/assets/img/tile.png")
        user-select none
        
        &.selected {
          border 2px solid os-select
          text-shadow 0px 0px 5px white
          &:after {
            content " "
            position absolute
            top 0
            left 0
            width 100%
            height 100%
            background rgba(os-select,0.5)
            z-index 0
          }
        }
        
        .backpack-name {
          position absolute
          left 0
          bottom 0
          z-index 1
          background rgba(black, 0.6)
          color white
          width 100%
          white-space nowrap
          overflow hidden
          text-overflow ellipsis
          margin 0
          font-size 0.7em
          padding .2em
          box-sizing border-box
        }
        
        .backpack-thumb {
          width 100px
          max-height 100px
        }
      }
    }
  }
  
  .messages-ui {
    .messages-container {
      margin 0.5em 1em
      
      .message {
        color white
        border-bottom 1px solid os-light
        
        &[data-read='false'] {
          background os-light
          color os-dark
          
          a {
            color os-dark
          }
        }
        
        &:last-child {
          border-bottom 0
        }
        a {
          color os-light
          text-decoration underline
        }
        i {
          vertical-align middle
        }
      }
    }
  }
}

.limit-width {
  width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  &:focus {
    overflow: auto
    text-overflow initial
  }
}

.scrollbar-adjust {
  height: calc(1em + 32px);
}

.droppable {
  position relative
  box-sizing border-box
  &.drag {
    background rgba(os 0.3)
  }
  &.drag:after {
    content " "
    position absolute
    top 0
    left 0
    box-sizing border-box
    width 100%
    height 100%
    border-radius 1em
    border 5px dashed os
    pointer-events none
  }
  
  &.white.drag {
    background rgba(white 0.3)
    &:after {
      border-color white
    }
  }
}

#opensprites-editor {
  display none
  position fixed
  top 0
  left 0
  width 100%
  height 100%
  z-index 10000
  
  &.active {
    display block
  }
}

#dlframe {
  width 1px
  height 1px
  border 0
  display none
}

.split-input-button {
  display: inline-flex;
  width 500px
  
  input {
    @extend .btn
    @extend .btn.flat
    flex 1
    border-right 0
    border-top-right-radius 0
    border-bottom-right-radius 0
    
    &:hover:not(:disabled) {
      background rgba(os-light, 0.5)
      color os
    }
  }
  
  .btn {
    border-top-left-radius 0
    border-bottom-left-radius 0
  }
  
  &.working {
    animation progress 0.5s linear infinite
    /* <black-magic> */
    background linear-gradient(-45deg,os-light 0px, os-light 1px, white 1px,white 10px,os-light 10px, os-light 15px,white 15px,white 24px,os-light 25px)
    /* </black-magic> */
    background-size 20px 20px
    background-repeat repeat
    
    
    input {
      background transparent
      &:hover:not(:disabled) {
        background transparent
      }
    }
  }
}

@keyframes progress {
  from {
    background-position 0 0
  }
  to {
    background-position 20px 0
  }
}


@require 'nav.styl'
@require 'signup-join.styl'
@require 'resources.styl'
@require 'footer.styl'
@require 'share.styl'
@require 'user.styl'
@require 'visualizer.styl'
@require 'leaving.styl'
@require 'comments.styl'
@require 'collection.styl'
@require 'ie.styl'
